#!/bin/bash
set -e

apt-get install -y tightvncserver
useradd -m -U -s /bin/bash ${VNC_USER}
echo "${VNC_USER} ALL=(ALL) NOPASSWD: ALL" >> /etc/sudoers && \
chown -R ${VNC_USER}:${VNC_USER} ${VNC_HOME}

su ${VNC_USER} -c " mkdir -p ${VNC_HOME}/.vnc " && \
su ${VNC_USER} -c "echo ${VNC_PASSWORD} | vncpasswd -f > ${VNC_HOME}/.vnc/passwd" && \
su ${VNC_USER} -c "chmod 600 ${VNC_HOME}/.vnc/passwd"
